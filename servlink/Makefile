#
# Makefile.in for servlink/src
#
# $Id: Makefile.in 715 2006-07-14 21:01:55Z michael $
#

CC              = gcc
INSTALL         = /usr/bin/install -c
INSTALL_BIN     = ${INSTALL}
CFLAGS          =  -Wall -O2 -g
LDFLAGS         =  -Wl,-export-dynamic
MKDEP           = gcc -MM
STDOUT		= > .depend
MV              = /bin/mv
RM              = /bin/rm
SED		= /bin/sed
prefix          = /home/pi/eircd
exec_prefix     = $(DESTDIR)${prefix}
bindir          = $(DESTDIR)${exec_prefix}/bin
datarootdir	= $(DESTDIR)${prefix}/share

CLOBBER		= 
SSL_LIBS	=  -lssl -lcrypto
SSL_INCLUDES	= 
ZIP_LIB		= -lz
IRCDLIBS        = -ldl -lcrypt  $(SSL_LIBS) $(ZIP_LIB)

INCLUDES        = -I. -I../include $(SSL_INCLUDES)
CPPFLAGS        = ${INCLUDES} 

PROGS		= servlink

SOURCES =     \
  servlink.c  \
  io.c        \
  control.c

OBJECTS = ${SOURCES:.c=.o}

all: .depend servlink

build: all

servlink: ${OBJECTS}
	${CC} ${CFLAGS} ${LDFLAGS} -o $@ ${OBJECTS} ${IRCDLIBS}

install: build
	mkdir -p $(bindir)
	@for i in $(PROGS); do \
                if test -f $(bindir)/$$i -a -z "$(CLOBBER)"; then \
                        echo $(MV) $(bindir)/$$i $(bindir)/$$i.old; \
                        $(MV) $(bindir)/$$i $(bindir)/$$i.old; \
                fi; \
                echo $(INSTALL_BIN) $$i $(bindir); \
                $(INSTALL_BIN) $$i $(bindir); \
        done

.c.o:
	${CC} ${CPPFLAGS} ${CFLAGS} -c $<

.depend:
	${MKDEP} ${CPPFLAGS} ${SOURCES} ${STDOUT}
	@${SED} -e '/^# Autogenerated - do not delete/,$$d' <Makefile >Makefile.depend
	@echo '# Autogenerated - do not delete' >>Makefile.depend
	@echo 'include .depend' >> Makefile.depend
	@${MV} Makefile.depend Makefile

clean:
	${RM} -f $(OBJECTS) servlink

distclean: clean
	${RM} -f Makefile .depend

.PHONY: clean distclean install build
# Autogenerated - do not delete
include .depend
